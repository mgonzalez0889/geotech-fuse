<div class="flex flex-col flex-auto w-full">
    <div class="flex flex-wrap w-full mx-auto p-6">
        <!--Title-->
        <div class="relative flex flex-col flex-auto p-4 bg-card rounded-2xl shadow overflow-hidden">
            <div class="flex items-center justify-between w-full">
                <div>
                    <h2 class="text-3xl font-semibold tracking-tight leading-8">Centro de monitoreo</h2>
                </div>
                <div class="hidden sm:inline-flex justify-end">
                    <div class="mx-2 text-center px-4 py-1 rounded-md text-white " style="background: #403e3e;">
                        <div>{{notAttended}}</div>
                        <p class="text-sm">No Atendida</p>
                    </div>
                    <div class="mx-2 text-center px-4 py-1 rounded-md text-white" style="background: #2e2e2e;">
                        <div>{{silenced}}</div>
                        <p class="text-sm">Silenciado</p>
                    </div>
                    <div class="mx-2 text-center px-4 py-1 rounded-md text-white" style="background: #0000ff;">
                        <div>{{onTrack}}</div>
                        <p class="text-sm">En Seguimiento</p>
                    </div>
                    <div class="mx-2 text-center px-4 py-1 rounded-md text-white" style="background: #2e2fff;">
                        <div>{{inRecovery}}</div>
                        <p class="text-sm">En Recuperación</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex flex-wrap w-full py-6">
            <div class="w-full overflow-hidden">
                <mat-drawer-container class="flex-auto h-auto md:h-180">
                    <mat-drawer #drawer [(opened)]="opened" mode="side" position="end"
                        class="w-full md:w-128 bg-gray-100 border-none">
                        <ng-container *ngIf="opened">
                            <app-control-center-actions></app-control-center-actions>
                        </ng-container>
                    </mat-drawer>
                    <mat-drawer-content class="flex flex-col bg-card shadow rounded-2xl">
                        <div class="flex flex-col flex-auto">
                            <div class="flex flex-wrap items-center pl-4 pr-6 py-3 md:pl-6 border-b">
                                <div class="flex flex-col flex-auto my-3">
                                    <div class="flex items-center">
                                        <div class="mr-4 text-2xl font-medium tracking-tight leading-6 truncate">Alarmas
                                        </div>
                                        <div class="flex items-center justify-center pl-2">
                                            <mat-icon>notifications_active</mat-icon>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-center my-3">
                                    <!-- <div class="mx-2 text-center px-4 py-2 cursor-pointer rounded-2xl bg-gray-200"
                                        matRipple [matMenuTriggerFor]="projectsMenu">
                                        <div class="flex items-center">
                                            <div class="overflow-hidden">
                                                <div class="font-medium leading-6 truncate">Por estado</div>
                                            </div>
                                            <div class="flex items-center justify-center pl-2">
                                                <mat-icon class="icon-size-5"
                                                    [svgIcon]="'heroicons_solid:chevron-down'">
                                                </mat-icon>
                                            </div>
                                            <mat-menu #projectsMenu="matMenu" [xPosition]="'before'">
                                                <mat-selection-list>
                                                    <mat-list-option checkboxPosition="before">
                                                        <span>sss</span>
                                                    </mat-list-option>
                                                </mat-selection-list>
                                            </mat-menu>
                                        </div>
                                    </div>
                                    <div class="mx-2 text-center px-4 py-2 cursor-pointer rounded-2xl bg-gray-200"
                                        matRipple [matMenuTriggerFor]="projectsMenu">
                                        <div class="flex items-center">
                                            <div class="overflow-hidden">
                                                <div class="font-medium leading-6 truncate">Por cliente</div>
                                            </div>
                                            <div class="flex items-center justify-center pl-2">
                                                <mat-icon class="icon-size-5"
                                                    [svgIcon]="'heroicons_solid:chevron-down'">
                                                </mat-icon>
                                            </div>
                                            <mat-menu #projectsMenu="matMenu" [xPosition]="'before'">
                                                <mat-selection-list>
                                                    <mat-list-option checkboxPosition="before">
                                                        <span>sss</span>
                                                    </mat-list-option>
                                                </mat-selection-list>
                                            </mat-menu>
                                        </div>
                                    </div>
                                    <div class="mx-2 text-center px-4 py-2 cursor-pointer rounded-2xl bg-gray-200"
                                        matRipple [matMenuTriggerFor]="projectsMenu">
                                        <div class="flex items-center">
                                            <div class="overflow-hidden">
                                                <div class="font-medium leading-6 truncate">Por evento</div>
                                            </div>
                                            <div class="flex items-center justify-center pl-2">
                                                <mat-icon class="icon-size-5"
                                                    [svgIcon]="'heroicons_solid:chevron-down'">
                                                </mat-icon>
                                            </div>
                                            <mat-menu #projectsMenu="matMenu" [xPosition]="'before'">
                                                <mat-selection-list>
                                                    <mat-list-option checkboxPosition="before">
                                                        <span>sss</span>
                                                    </mat-list-option>
                                                </mat-selection-list>
                                            </mat-menu>
                                        </div>
                                    </div> -->
                                    <div class="flex border-2 rounded-full p-2">
                                        <input class="ml-2" #input matInput placeholder="Buscar"
                                            (keyup)="filterTable($event)">
                                        <mat-icon class="icon-size-5" matSuffix svgIcon="heroicons_outline:search">
                                        </mat-icon>
                                    </div>
                                    <div class="mx-2 text-center px-4 py-2" *ngIf="opened">
                                        <button mat-flat-button [color]="'accent'" [matTooltip]="'Atender'"
                                            (click)="attendAlarm()">
                                            Atender
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="pt-6">
                                <mat-tab-group>
                                    <mat-tab label="En gestión">
                                        <div class="flex flex-col flex-auto sm:mb-18 overflow-y-auto">
                                            <table mat-table [dataSource]="dataAlarms" matSort class="w-full">
                                                <!-- event_name Column -->
                                                <ng-container matColumnDef="event_name">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Alarmas </th>
                                                    <td mat-cell *matCellDef="let row">
                                                        <span
                                                            class="inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase"
                                                            style="background: {{row.color_event}};">
                                                            {{row.event_name}}</span>
                                                    </td>
                                                </ng-container>
                                                <!-- state Column -->
                                                <ng-container matColumnDef="state">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Estado </th>
                                                    <td mat-cell *matCellDef="let row">
                                                        <span
                                                            class="inline-flex items-center font-bold text-xs pr-2.5 py-0.5 rounded-full tracking-wide uppercase">
                                                            {{row.state}}
                                                        </span>
                                                    </td>
                                                </ng-container>
                                                <!-- plate Column -->
                                                <ng-container matColumnDef="plate">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Placa </th>
                                                    <td mat-cell *matCellDef="let row">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            {{row.plate}}
                                                        </span>
                                                    </td>
                                                </ng-container>
                                                <!-- code Column -->
                                                <ng-container matColumnDef="code">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Codigo
                                                        interno </th>
                                                    <td mat-cell *matCellDef="let row">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            {{row.code}}
                                                        </span>
                                                    </td>
                                                </ng-container>
                                                <!-- count Column -->
                                                <ng-component matColumnDef="count">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Cantidad
                                                    </th>
                                                    <td mat-cell *matCellDef="let row">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            {{row.count}}
                                                        </span>
                                                    </td>
                                                </ng-component>
                                                <!-- address Column -->
                                                <ng-container matColumnDef="address">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Direccion
                                                    </th>
                                                    <td mat-cell *matCellDef="let row">
                                                        <a class="pr-6 whitespace-nowrap"
                                                            [matTooltip]="'Ver en el  mapa'"
                                                            href="https://maps.google.com/?q={{row.x}},{{row.y}}"
                                                            target="_blank" rel="noopener noreferrer">{{row.address}}
                                                        </a>
                                                    </td>
                                                </ng-container>
                                                <!-- date_entry Column -->
                                                <ng-container matColumnDef="date_entry">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha </th>
                                                    <td mat-cell *matCellDef="let row">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            {{row.date_entry | date: 'dd/MM/yyyy hh:mm:ss'
                                                            }} </span>
                                                    </td>
                                                </ng-container>
                                                <tr mat-header-row *matHeaderRowDef="columnsAlarms"></tr>
                                                <tr mat-row *matRowDef="let row; columns: columnsAlarms;"
                                                    (click)="actionsControlCenter(row)"></tr>
                                                <!-- Row shown when there is no matching data. -->
                                                <tr class="mat-row" *matNoDataRow>
                                                    <td class="mat-cell" colspan="7">No hay datos que coincidan con el
                                                        filtro
                                                        "{{input.value}}"
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>

                                    </mat-tab>
                                    <mat-tab label="Silenciadas"> Content 2 </mat-tab>
                                    <mat-tab label="Todos"> Content 3 </mat-tab>
                                </mat-tab-group>
                            </div>
                        </div>
                        <mat-paginator
                            class="sm:absolute sm:inset-x-0 sm:bottom-0 sm:border-t sm:border-b-0 border-b z-10  bg-gray-200"
                            [pageSizeOptions]="[10]" aria-label="Select page of users">
                        </mat-paginator>
                    </mat-drawer-content>
                </mat-drawer-container>
            </div>
        </div>

        <!-- <mat-drawer-container class="w-full">
            <mat-drawer #drawer mode="side" opened="false" position="end">Mostrar aqui el mapa y los contactos
            </mat-drawer>
            <mat-drawer-content>
                <button mat-raised-button (click)="drawer.toggle()">Toggle drawer</button>
            </mat-drawer-content>
        </mat-drawer-container> -->


    </div>
</div>
