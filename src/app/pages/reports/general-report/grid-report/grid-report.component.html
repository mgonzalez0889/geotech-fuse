<div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent">
    <ng-container>
        <div
            class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-6 px-6 md:px-8 border-b">
            <!-- Titulo   -->
            <div class="text-3xl font-extrabold tracking-tight">Historico y eventos</div>
            <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
                <!-- Boton generar reporte -->
                <button class="ml-4" mat-flat-button [color]="'primary'" (click)="generateReport()">
                    <mat-icon [svgIcon]="'heroicons_outline:view-grid-add'"></mat-icon>
                    <span class="ml-2 mr-1">Generar reporte</span>
                </button>
            </div>
        </div>
    </ng-container>
    <!--Tabla-->
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <!-- Placa Column -->
        <ng-container matColumnDef="plate">
            <th mat-header-cell *matHeaderCellDef> Placa</th>
            <td mat-cell *matCellDef="let element"> {{element.plate}} </td>
        </ng-container>
        <!-- Fecha Column -->
        <ng-container matColumnDef="date_event">
            <th mat-header-cell *matHeaderCellDef> Fecha</th>
            <td mat-cell *matCellDef="let element"> {{element.date_event | date: 'medium' }} </td>
        </ng-container>
        <!-- Evento Column -->
        <ng-container matColumnDef="event_name">
            <th mat-header-cell *matHeaderCellDef> Evento</th>
            <td mat-cell *matCellDef="let element"> {{element.event_name}} </td>
        </ng-container>
        <!-- Dirección Column -->
        <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef> Dirección</th>
            <td mat-cell *matCellDef="let element"> {{element.address}} </td>
        </ng-container>
        <!-- Latitud Column -->
        <ng-container matColumnDef="x">
            <th mat-header-cell *matHeaderCellDef> Latitud</th>
            <td mat-cell *matCellDef="let element"> {{element.x}} </td>
        </ng-container>
        <!-- Longitud Column -->
        <ng-container matColumnDef="y">
            <th mat-header-cell *matHeaderCellDef> Longitud</th>
            <td mat-cell *matCellDef="let element"> {{element.y}} </td>
        </ng-container>
        <!-- Velocidad Column -->
        <ng-container matColumnDef="speed">
            <th mat-header-cell *matHeaderCellDef> Velocidad</th>
            <td mat-cell *matCellDef="let element"> {{element.speed}} </td>
        </ng-container>
        <!-- Batería Column -->
        <ng-container matColumnDef="battery">
            <th mat-header-cell *matHeaderCellDef> Batería</th>
            <td mat-cell *matCellDef="let element"> {{element.battery | percent}}</td>
        </ng-container>
        <!-- Ver en mapa Column -->
        <ng-container matColumnDef="vew_map">
            <th mat-header-cell *matHeaderCellDef> Ver en mapa</th>
            <td mat-cell *matCellDef="let element">
                <a target="_blank" href="https://maps.google.com/?q={{element.x}},{{element.y}}"> Ver en el mapa</a>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <!-- Mensaje cuando excede  el reporte en mas de 90 dias -->
    <mat-card class="p-8 m-8 text-center " *ngIf="!messageExceedTime">
        <mat-card-title>Aviso</mat-card-title>
        <mat-card-content>
            <p>El reporte solicitado cubre un rango de fecha de más de 90 días; en ese caso puede solicitarlo a
                través de nuestros canales de atención al cliente.</p>
            <p>Telefono +57 386 0000 Carrera 55 #100-51 Centro Empresarial Blue Gardens, Barranquilla, Atlántico</p>
            <p>Servicioalcliente@geotech.com.co</p>
        </mat-card-content>
    </mat-card>
    <!-- Mensaje cuando no se encuentran dantos en la api de reporte -->
    <mat-card class="p-8 m-8 text-center " *ngIf="!messageNoReport">
        <mat-card-title>Aviso</mat-card-title>
        <mat-card-content>
            <p>Lo sentimos, no se encontraron datos</p>
        </mat-card-content>
    </mat-card>
    <mat-paginator [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
</div>
