<div class="flex flex-col w-full  sm:pl-6">
  <div class="relative overflow-auto bg-card shadow rounded-2xl min-h-auto">

    <div class="absolute z-999 right-2 top-2">
      <button mat-icon-button matTooltip="Cerrar" class="bg-white shadow-xl" (click)="closeMenu()">
        <mat-icon class="text-gray-400" svgIcon="heroicons_outline:x"></mat-icon>
      </button>
    </div>

    <div #map id="map" class="h-64 rounded-2xl"></div>

    <div class="flex flex-col flex-auto items-center">
      <div [hidden]="editMode" class="py-8">
        <div class="flex items-center gap-5">
          <div class="text-2xl font-semibold tracking-tight leading-6 truncate">
            Información del vehículo
          </div>
          <div class="flex items-center ml-auto">
            <button mat-stroked-button (click)="editMode = true">
              <mat-icon class="icon-size-5" svgIcon="heroicons_solid:pencil-alt"></mat-icon>
              <span class="ml-2">Editar</span>
            </button>
          </div>
        </div>


        <div class="flex flex-col gap-4 mt-2">
          <div class="flex gap-2 sm:items-center" *ngIf="detailMobile['plate'] as plate">
            <mat-icon matTooltip="Placa">local_shipping</mat-icon>
            <p class="ml-6 leading-6">{{plate}}</p>
          </div>
          <div class="flex gap-2 sm:items-center" *ngIf="detailMobile['brand'] as brand">
            <mat-icon matTooltip="Marca">branding_watermark</mat-icon>
            <p class="ml-6 leading-6">{{brand}}</p>
          </div>
          <div class="flex gap-2 sm:items-center" *ngIf="detailMobile['color'] as color">
            <mat-icon matTooltip="Color" [ngStyle]="{'color': color}">lens</mat-icon>
            <p class="ml-6 leading-6">Color</p>
          </div>
          <div class="flex gap-2 sm:items-center" *ngIf="detailMobile['capacity'] as capacity">
            <mat-icon matTooltip="Numero de pasajeros">branding_watermark</mat-icon>
            <p class="ml-6 leading-6">{{capacity}}</p>
          </div>
        </div>
        <!-- 
          <div class="flex items-center my-4 border-b">
            <div class="text-2xl font-semibold tracking-tight leading-6 truncate my-3">
              Información del conductor
            </div>
          </div> -->
      </div>
    </div>

    <div [hidden]="!editMode">
      <form [formGroup]="mobilForm" class="flex flex-col gap-3 px-8 py-4" (submit)="this.sendData()">
        <mat-form-field class="fuse-mat-dense w-full">
          <mat-label>Conductor</mat-label>
          <mat-icon matPrefix>person</mat-icon>
          <mat-select [formControlName]="'owner_driver_id'">
            <mat-option *ngFor="let driver of drivers" [value]="driver.id">
              {{driver.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <div class="flex justify-between gap-2">

          <mat-form-field class="fuse-mat-dense w-full">
            <mat-label>Código interno</mat-label>
            <mat-icon matPrefix svgIcon="heroicons_solid:user-circle">
            </mat-icon>
            <input matInput formControlName="internal_code" placeholder="Código interno">
          </mat-form-field>

          <app-input-color [form]="this.mobilForm" labelControl="color"></app-input-color>
        </div>


        <div class="flex justify-between gap-2">
          <mat-form-field class="fuse-mat-dense w-full">
            <mat-label>Marca</mat-label>
            <mat-icon matPrefix svgIcon="heroicons_solid:user-circle">
            </mat-icon>
            <input matInput formControlName="brand" placeholder="Marca">
          </mat-form-field>

          <mat-form-field class="fuse-mat-dense w-full">
            <mat-label>Modelo</mat-label>
            <mat-icon matPrefix>person</mat-icon>
            <mat-select formControlName="mobile_model">
              <mat-option *ngFor="let model of models" [value]="model">
                {{model}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="flex justify-between gap-2">
          <mat-form-field class="fuse-mat-dense w-full">
            <mat-label>Tipo de vehículo</mat-label>
            <mat-icon matPrefix>person</mat-icon>
            <mat-select formControlName="type_mobile_id">
              <mat-option *ngFor="let type of typeMobile" [value]="type.id">
                {{type.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="fuse-mat-dense w-full">
            <mat-label>Tipo de servicio</mat-label>
            <mat-icon matPrefix svgIcon="heroicons_solid:user-circle">
            </mat-icon>
            <mat-select formControlName="type_of_service_id">
              <mat-option *ngFor="let type of typeServices" [value]="type.id">
                {{type.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="flex justify-between gap-2">
          <mat-form-field class="fuse-mat-dense w-full">
            <mat-label>Numero de pasajeros</mat-label>
            <mat-icon matPrefix svgIcon="heroicons_solid:user-circle">
            </mat-icon>
            <input matInput formControlName="number_passengers" placeholder="Numero de pasajeros">
          </mat-form-field>

          <mat-form-field class="fuse-mat-dense w-full">
            <mat-label>Capacidad de carga </mat-label>
            <mat-icon matPrefix svgIcon="heroicons_solid:user-circle">
            </mat-icon>
            <input matInput formControlName="weight_capacity" placeholder="Capacidad de carga" type="text"
              pattern="^[0-9]+">
            <mat-select class="mr-1.5" formControlName="weight_unit" matSuffix>
              <mat-option [value]="0">Kg</mat-option>
              <mat-option [value]="1">Ton</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <mat-form-field class="fuse-mat-dense w-full">
          <mat-label>Numero de chasis </mat-label>
          <mat-icon matPrefix svgIcon="heroicons_solid:user-circle">
          </mat-icon>
          <input matInput formControlName="number_chassis" placeholder="Numero de chasis">
        </mat-form-field>

        <mat-form-field class="fuse-mat-dense w-full">
          <mat-label>Numero de motor</mat-label>
          <mat-icon matPrefix svgIcon="heroicons_solid:user-circle">
          </mat-icon>
          <input matInput formControlName="number_engine" placeholder="Numero de motor">
        </mat-form-field>

        <div class="flex items-center">
          <button type="button" class="ml-auto" mat-button (click)="this.editMode = false">
            Cancelar
          </button>

          <button class="ml-2" type="submit" mat-flat-button color="accent" [disabled]="this.mobilForm.invalid">
            Guardar
          </button>
        </div>

      </form>
    </div>

  </div>
</div>