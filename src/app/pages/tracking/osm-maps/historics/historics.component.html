<div class="historic-plate">
    <div class="title-historic">
        <div class="title">
            Historico y eventos
        </div>
        <div class="close" (click)="mapFunctionalitieService.showHistoricPlate = false">
            <img style="height: 20px; width: 20px;" src="./assets/icons/iconMap/close-blue.svg">
        </div>
    </div>

    <div class="data-historic">
        <div class="filters">
            <div class="export" (click)="settingService.JSONToCSVConvertor(this.mapFunctionalitieService.historic, true, 'Historic')">
                Exportar
                <mat-icon svgIcon="download"></mat-icon>
            </div>

            <div class="filtrar" (click)="filters()">
                Filtros
                <mat-icon svgIcon="filter_alt"></mat-icon>
            </div>
        </div>

        <div class="result-plate">
            <div class="head-result" *ngFor="let data of this.mapFunctionalitieService.historic">
                <div style="cursor: pointer;">
                    <div class="title-result">
                        <div class="title" *ngIf="data.data.length <= 0">
                            {{data.plate}}
                        </div>

                        <div class="title" *ngIf="data.data.length > 0">
                            <mat-checkbox (change)="selectAll($event, data.plate, data.color)"
                                [(ngModel)]="data.selected">
                                <label style="color: {{data.color}};">{{data.plate}}</label>
                            </mat-checkbox>
                        </div>
                        <div class="close">
                            <img style="height: 12px; width: 15px; cursor: pointer;"
                                src="./assets/icons/iconMap/arrow-bottom.svg"
                                [ngClass]="seletedHistoric === data.plate ? 'rotate' : ''"
                                (click)="data.data.length > 0 ? viewHistoric(data.plate) : ''">
                        </div>
                    </div>

                    <div class="subtitle-result" *ngIf="data.data.length > 0">
                        Se encontraron resultados.
                    </div>

                    <div class="subtitle-result" *ngIf="data.data.length <= 0">
                        No se encontraron resultados.
                    </div>
                </div>

                <div class="body-result" *ngIf="seletedHistoric === data.plate">
                    <div class="cards">
                        <div class="card" *ngFor="let event of data.data">
                            <div class="card-icon">
                                <mat-checkbox (change)="onChange($event, event)" [(ngModel)]="event.selected">
                                </mat-checkbox>
                            </div>

                            <div class="card-description">
                                <div class="name-event">
                                    <b>Evento:</b> {{event.event_name}}
                                </div>

                                <div class="date-event">
                                    <b>Fecha de transmisión:</b> {{convertDate(event.date_entry)}}
                                </div>

                                <div class="address-event">
                                    <a class="pr-6 whitespace-nowrap" [matTooltip]="'Ver en el  mapa'"
                                        href="https://maps.google.com/?q={{event['x']}},{{event['y']}}" target="_blank">
                                        <b>Dirección:</b> {{event.address}} <mat-icon class="icon-size-4">open_in_new
                                        </mat-icon>
                                    </a>
                                </div>

                                <div class="speed-event">
                                    <b>Velocidad:</b> {{event.speed}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>