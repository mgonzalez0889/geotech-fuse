<!--Options menu-->
<div class="relative w-90 bg-card shadow-md rounded-md pt-3">

  <mat-tab-group>
    <mat-tab label="Mobiles">
      <!--Options group-->
      <div class="flex justify-between gap-3">
        <mat-form-field class="fuse-mat-dense w-full">
          <mat-select placeholder="Tipo Servicio" (selectionChange)="filterForTypeService($event)">
            <mat-option [value]="typeService.classMobileId" *ngFor="let typeService of typeServices">
              {{typeService.classMobileName}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="fuse-mat-dense w-full">
          <mat-icon matPrefix class="icon-size-5 " svgIcon="heroicons_solid:search"></mat-icon>
          <input matInput placeholder="Buscar" (keyup)="applyFilter($event)">
        </mat-form-field>
        <!-- <button mat-icon-button>
          <mat-icon svgIcon="fixed-movil"></mat-icon>
        </button> -->
      </div>

      <!--Table list Mobiles-->
      <div class="h-100 overflow-y-auto">

        <table mat-table [dataSource]="dataSource">

          <ng-container matColumnDef="checkbox">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row; let i=index;" class="w-10">
              <mat-checkbox #checkbox (click)="individual(checkbox.checked, row)"
                (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)">
              </mat-checkbox>
            </td>
          </ng-container>

          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row;" class="w-10">
              <span class="pr-6 whitespace-nowrap text-sm text-blackTertiary">
                {{row.plate}}
              </span>
            </td>
          </ng-container>


          <ng-container matColumnDef="code">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let element" class="w-50">
              {{mapFunctionalitieService.convertDateHour(element.date_entry)}}
            </td>
          </ng-container>


          <ng-container matColumnDef="menu">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element" class="w-40">
              <mat-icon svgIcon="{{mapFunctionalitieService.setIconInfoWindows(element).status}}">
              </mat-icon>
              <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="mapFunctionalitieService.goDetail(element.id)">
                  <span>Ver detalle</span>
                </button>

                <button mat-menu-item (click)="mapFunctionalitieService.goCommands(element.plate)">
                  <span>Comandos</span>
                </button>

              </mat-menu>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns" [hidden]="true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        </table>
      </div>
      <!--End list mobiles-->
    </mat-tab>
    <mat-tab label="Flotas">
      <div class="flex flex-wrap">
        <mat-form-field class="fuse-mat-dense w-full">
          <mat-icon matPrefix [svgIcon]="'heroicons_outline:search'"></mat-icon>
          <input matInput [autocomplete]="'off'" [placeholder]="'Search'" (keyup)="applyFilterFleets($event)">
        </mat-form-field>
      </div>
      <!--Table list Mobiles-->
      <div class="overflow-y-auto">
        <div>
          <table mat-table [dataSource]="mapFunctionalitieService.dataSourceFleets">
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let row; let i=index;" class="w-100">
                <mat-checkbox #checkbox (click)="individualFleet(checkbox.checked, row)"
                  (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)">
                  <span class="pr-6 whitespace-nowrap text-sm text-blackTertiary">
                    {{row.name}}
                  </span>
                </mat-checkbox>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsFleets" [hidden]="true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsFleets;">
            </tr>
          </table>
        </div>
      </div>
      <!--End list mobiles-->
    </mat-tab>
  </mat-tab-group>

  <div class="absolute flex w-full justify-end bottom-4 -left-3 z-999"
    *ngIf="mapFunctionalitieService.plateHistoric.length > 0">
    <button matTooltip="Historial" mat-mini-fab (click)="generateHistoric()">
      <mat-icon svgIcon="historic"></mat-icon>
    </button>
  </div>

</div>